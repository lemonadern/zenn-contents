---
title: "new Date() ã§æ—¥ä»˜æ–‡å­—åˆ—ã®ãƒ‘ãƒ¼ã‚¹ã‚’ã™ã‚‹ã®ã‚’é¿ã‘ã‚ˆã†"
emoji: "ğŸ˜¢"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [JavaScript, Date]
published: false
---

# TL;DR
- `new Date()` ãŠã‚ˆã³ `Date.parse()` ã§ã‚€ã‚„ã¿ã«æ–‡å­—åˆ—ã®è§£é‡ˆã‚’ã™ã‚‹ã®ã¯é¿ã‘ã‚‹ã¹ã
  - æ–‡å­—åˆ—ã®è§£æã®æŒ™å‹•ãŒç’°å¢ƒã«ã‚ˆã£ã¦ç•°ãªã‚‹ãŸã‚
  - ãªã‹ã§ã‚‚V8ã®å®Ÿè£…ã§ã¯ãƒ‘ãƒ¼ã‚¹æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒéå¸¸ã«ç·©ã„
- æ—¥ä»˜ç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é©åˆ‡ã«åˆ©ç”¨ã—ã‚ˆã†

# æ—¥ä»˜æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦Dateã‚’å¾—ã‚‹

`"2022-01-01"` ãªã©ã®æ—¥ä»˜ã‚’è¡¨ã™æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ Date ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¾—ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€Googleæ¤œç´¢ã™ã‚‹ã¨ `new Date()` ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ãŒå¤šããƒ’ãƒƒãƒˆã—ã¾ã™ã€‚

```js
new Date("2022-01-01")
// => Sat Jan 01 2022 09:00:00 GMT+0900 (Japan Standard Time)
```
ãŠæ‰‹è»½ã«ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã—ã€æ­£ã—ã„æ—¥ä»˜ã§ç”Ÿæˆã§ãã¦ã„ã¾ã™ã­ã€‚

ã—ã‹ã—ã“ã®æ–¹æ³•ã§æ—¥ä»˜æ–‡å­—åˆ—ã®ãƒ‘ãƒ¼ã‚¹ã‚’è¡Œã†éš›ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
ä½¿ã„æ–¹ã«ã‚ˆã£ã¦ã¯ç’°å¢ƒé–“ï¼ˆä¸»ã«ãƒ–ãƒ©ã‚¦ã‚¶é–“ï¼‰ã«ãŠã‘ã‚‹ç•°ãªã£ãŸå‹•ä½œã‚’èª˜ç™ºã™ã‚‹ãŸã‚ã€`new Date()` ãŠã‚ˆã³ã“ã®å¾Œã«èª¬æ˜ã™ã‚‹ `Date.parse()` ã‚’ç”¨ã„ã¦æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã®ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

# `new Date`ã§æ–‡å­—åˆ—ã®è§£æã‚’ã™ã‚‹ä¸Šã§çŸ¥ã£ã¦ãŠãã¹ãä»•æ§˜
## new Date ã«æ–‡å­—åˆ—ã‚’æ¸¡ã—ãŸã¨ãã®å‹•ä½œ
`new Date(dateString)`ã®ã‚ˆã†ã«å‘¼ã³å‡ºã—ãŸå ´åˆã€å†…éƒ¨çš„ã«ã¯ `Date.parse` ã‚’ç”¨ã„ã¦æ–‡å­—åˆ—ã®è§£æãŒè¡Œã‚ã‚Œã¾ã™ã€‚[^1]

## Date.parse ãŒå—ã‘å–ã‚‹æ–‡å­—åˆ—ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ã“ã®ã¨ãã€æ—¥ä»˜ã‚’è¡¨ã™æ–‡å­—åˆ—ã«è¦æ±‚ã•ã‚Œã‚‹ã‚‚ã£ã¨ã‚‚åŸºæœ¬çš„ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã€ ISO8601 ã‚’ã‚‚ã¨ã«ECMAScriptã§å®šç¾©ã•ã‚ŒãŸ[^2]ã‚‚ã®ã§ã™ã€‚
```
YYYY-MM-DDTHH:mm:ss.sssZ
YYYY
YYYY-MM
YYYY-MM-DD
THH:mm
THH:mm:ss
THH:mm:ss.sss
```
ä»Šå›ã¯ `YYYY-MM-DD` ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ã€æ—¥ä»˜ã‚’è¡¨ã™æ–‡å­—åˆ—ã¯ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã«ãªã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã¨ã“ã‚ãŒã€ `Date.parse` ãŒå—ã‘å…¥ã‚Œã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ãã‚Œã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

>  If the String does not conform to that format the function may fall back to any implementation-specific heuristics or implementation-specific date formats. [^3]

> ä¸ãˆã‚‰ã‚ŒãŸæ–‡å­—åˆ—ãŒãã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«é©åˆã—ã¦ã„ãªã„å ´åˆã€å®Ÿè£…å›ºæœ‰ã®æ…£ç¿’çš„ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ãã®ä»–ã®å®Ÿè£…å›ºæœ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ãªã‚“ã¨ `Date.parse` ã¯å®Ÿè£…ä¾å­˜ã§ãã®ä»–ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚‚è¨±å®¹ã™ã‚‹ã®ã§ã™ã€‚
`Date.parse` ãŒ `NaN` ã‚’è¿”ã™ã®ã¯ã€æ–‡å­—åˆ—ã®è§£é‡ˆãŒã§ããªã‹ã£ãŸå ´åˆã‚„ã€ä¸æ­£ãªè¦ç´ å€¤ã‚’å«ã‚“ã§ã„ã‚‹ã¨åˆ¤æ–­ã•ã‚ŒãŸå ´åˆã§ã™ã€‚
ã“ã‚Œã¯ã€ã‚ã‚‹ç’°å¢ƒã§è§£æã§ãã‚‹æ–‡å­—åˆ—ãŒã€ä»–ã®ç’°å¢ƒã§ã¯è§£æã§ããªã„ã‹ã‚‚ã—ã‚Œãªã„ã¨ã„ã†ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
ãŸã¨ãˆã° Chrome, Firefox, Safari ã¯ãã‚Œãã‚ŒJSã‚¨ãƒ³ã‚¸ãƒ³ãŒç•°ãªã‚‹ã®ã§ã€æŒ™å‹•ã®é•ã„ã‚’ç°¡å˜ã«è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
// ISO8601 ã«æº–æ‹ ã—ã¦ã„ãªã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ–‡å­—åˆ—ã‚’ä¸ãˆã‚‹

// Chrome (Google Chrome 100.0.4896.127) 
new Date("2022.04.20")
// => Wed Apr 20 2022 00:00:00 GMT+0900 (Japan Standard Time)

// Firefox (Mozilla Firefox 99.0.1)
new Date("2022.04.20")
// => Invalid Date
```
ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã‚ˆã‚Šã¾ã™ãŒã€ ã“ã®ã‚ˆã†ãªä»•æ§˜ã‚’çŸ¥ã‚‰ãšã« `new Date()` ã‚„ `Date.parse()` ã‚’åˆ©ç”¨ã—ãŸå ´åˆã€ç’°å¢ƒå·®ç•°ã«ã‚ˆã‚‹å•é¡Œã‚’ç™ºç”Ÿã•ã›ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

# ç‰¹ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç·©ã„V8
ã“ã“ã¾ã§èª­ã¿ã€
**ã€Œç’°å¢ƒå·®ç•°ãŒå•é¡Œã¨ã¯ã„ãˆã€ISO8601 ã«æº–æ‹ ã—ãŸæ›¸å¼ã®æ–‡å­—åˆ—ã‚’åˆ©ç”¨ã™ã‚Œã°å•é¡Œãªã„ã®ã§ã¯ã€**
ã¨æ€ã£ãŸæ–¹ã‚‚ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

ã—ã‹ã—ç½ ã¯ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ã€‚
è©¦ã—ã« Node.js ã§ã€å­˜åœ¨ã—ãªã„æ—¥ä»˜ã§ã‚ã‚‹ `"2022-02-29"` ã‚’ `new Date()` ã«ä¸ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```js
// Node.js v16.14.2

new Date("2022-02-29")
// => Tue Mar 01 2022 09:00:00 GMT+0900 (Japan Standard Time)
```
ãªã‚“ã¨3æœˆ1æ—¥ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚
V8ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ Node.js ã‚„ Chrome ã§ã¯ã€å­˜åœ¨ã—ãªã„æ—¥ä»˜ã«å¯¾ã—ã¦ã‚‚éå¸¸ã«ç·©ã„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¡Œã‚ã‚Œã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€å­˜åœ¨ã—ãªã„æ—¥ä»˜ã§ã‚‚31æ—¥ã¾ã§ã¯æ­£ã—ã„æ—¥ä»˜ã¨ã—ã¦æ‰±ã‚ã‚Œã€å®Ÿéš›ã®æœˆã«å·®åˆ†ãŒåŠ ç®—ã•ã‚ŒãŸæ—¥ä»˜ãŒè¿”ã•ã‚Œã¾ã™ã€‚
åŒã˜å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã‚‚ Firefox ã‚„ Safari ã§ã¯ `Invalid Date` ã¨ãªã‚‹ã®ã§ã€V8å›ºæœ‰ã®å®Ÿè£…ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ä¾¿åˆ©ãªæ©Ÿèƒ½ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ–‡å­—åˆ—ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹å ´åˆãªã©ã«ã¯ä¾ç„¶ã¨ã—ã¦ä½¿ã„ã¥ã‚‰ã„æŒ™å‹•ã§ã™ã—ã€ã“ã‚ŒãŒç’°å¢ƒå›ºæœ‰ã®ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ãŠã‹ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

# å›é¿ç­–
ã‚‚ã—ã‚‚æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¾—ãŸã„ã®ãªã‚‰ã°ã€è½ã¨ã—ç©´ãŒç„¡æ•°ã«å­˜åœ¨ã™ã‚‹ Date ã®æ¨™æº–æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã‚Šã‚‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«é ¼ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

ã“ã“ã¾ã§è¦‹ã¦ããŸã‚ˆã†ãª
- æ›¸å¼ã«æ°—ã‚’ã¤ã‘ãªã‘ã‚Œã°ãªã‚‰ãªã„
- å­˜åœ¨ã™ã‚‹æ—¥ä»˜ã‹ã©ã†ã‹ã‚’æ°—ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„

ãªã©ã®å•é¡Œã§ã‚ã‚Œã°ã€å¤§æŠµã®æ—¥ä»˜è¨ˆç®—ç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã“ã§ã¯ã€ `date-fns` ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚
```js
// ISO8601ã«æº–æ‹ ã—ã¦ã„ãªã„æ–‡å­—åˆ—ã§ã‚‚ã€æ›¸å¼ã‚’æŒ‡å®šã—ã¦å¯¾å¿œã§ãã‚‹
dateFns.parse('2022.04.20', 'yyyy.MM.dd', new Date())
// => Wed Apr 20 2022 09:00:00 GMT+0900 (Japan Standard Time)

// å­˜åœ¨ã—ãªã„æ—¥ä»˜ã¯ã€`Invalid Date` ã¨ãªã‚‹
dateFns.parse('2022-02-29', 'yyyy-MM-dd', new Date())
// => Invalid Date
```

# ã¾ã¨ã‚
ã¨ã„ã†ã‚ã‘ã§ã€ `new Date()` ãŠã‚ˆã³ `Date.parse()` ã¯ç’°å¢ƒé–“ã§å‹•ä½œãŒç•°ãªã‚‹ã®ã§ã‚€ã‚„ã¿ãªåˆ©ç”¨ã‚’é¿ã‘ã‚ˆã†ã¨ã„ã†ãŠè©±ã§ã—ãŸã€‚

èª¤ã£ãŸç‚¹ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€ã‚„ã•ã—ããƒã‚µã‚«ãƒªã‚’æŠ•ã’ã¦ãã‚Œã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚ãœã²ã‚ˆã‚ã—ããŠã­ãŒã„ã—ã¾ã™ã€‚




[^1]: æ¸¡ã•ã‚ŒãŸå¼•æ•°ã®æ•°ãŒ1ã¤ã§å‹å¤‰æ›å¾Œã®å¼•æ•°ã®å‹ãŒStringã®ã¨ãï¼ˆã–ã£ãã‚Šã™ãã‚‹èª¬æ˜ï¼‰ã€parseãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒã˜ãƒ«ãƒ¼ãƒ«ã§ãƒ‘ãƒ¼ã‚¹ãŒè¡Œã‚ã‚Œã‚‹ã€‚ https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date
[^2]: ECMAScriptã§ã¯ã€`ISO 8601`ã®`Calendar Dates`æ‹¡å¼µæ›¸å¼ã‚’å˜ç´”åŒ–ã—ãŸã‚‚ã®ã‚’ã‚’æ¨™æº–çš„ãªæ—¥ä»˜æ–‡å­—åˆ—å¤‰æ›ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦å®šç¾©ã—ã¦ã„ã‚‹ã€‚ https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format
[^3]: https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date.parse