---
title: "JavaScriptでイミュータブルにソートする方法"
emoji: "📑"
type: "tech"
topics: []
published: false
---

# sortは破壊的なメゾッド
JavaScriptにおける`sort`は破壊的なメゾッドなので、実行すると元のデータを破壊する。

```js
let arr = [1, 3, 2, 0]
console.log(arr)
// Output: [1, 3, 2, 0]

arr.sort()
console.log(arr)
// Output: [0, 1, 2, 3]
```
ソート結果を代入しても、元データも同様に書き換わる
```js
console.log(arr)
// Output: [1, 3, 2, 0]

const sorted = arr.sort()
console.log(sorted)
// Output: [0, 1, 2, 3]

console.log(arr)
// Output: [0, 1, 2, 3]
```

# 元のデータを壊すな
しかし元の配列はそのままで、新しくソート済みの配列を用意したいことも多い。

そんな時は、
```js
const arr = 

[Array.prototype.sort()  - MDN Web Docs](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)によると、
> 返値
ソートされた結果の配列。ソートは対象配列上で in place に行われることに注意して下さい。コピーされた別の配列が準備されることはありません。

との記述。

つまり、sortは元の配列自体に影響を及ぼすので、代入の形にしても元の配列自体が書き換えられることには変わりない。

つまり、`const sortedArray = arr.sort()`のように記述した場合でも`arr`自体もソートされるので、`sortedArray`と`arr`はソート済みの同じ配列となる。

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort
https://noah.plus/blog/007/